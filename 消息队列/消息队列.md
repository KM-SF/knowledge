### 为什么要使用消息队列

![为什么要使用消息队列](\消息队列\images\为什么要使用消息队列.png)

1. 使用同步的通信方式来解决多服务之间的问题。多服务之间的同步通信方式会存在性能和稳定性问题。
2. 使用消息队列将通信方式改为异步。可以让上游请求快速成功，极大提高了系统的吞吐量。而分布式系统中，通过 下游多个服务的分布式事务保障，也能解决业务执行之后的最终一致性  
3. 消息队列具体解决通信问题

## 什么是 MQ

Message Queue（MQ），消息队列中间件。很多⼈都说：MQ 通过将消息的发送和接收分离来实现应⽤程序的异步和解偶，这个给⼈的直觉是——MQ 是异步的，⽤来解耦的，但是这个只是 MQ 的效果⽽不是⽬的。MQ 真正的⽬的是为了通讯，屏蔽底层复杂的通讯协议，定义了⼀套应⽤层的、更加简单的通讯协议。MQ 所要做的就是构建⼀个简单的“协议”——⽣产者/消费者模型。MQ 带给我的“协议”不是具体的通讯协议，⽽是更⾼层次通讯模型。它定义了两个对象——发送数据的叫⽣产者；接收数据的叫消费者， 提供⼀个SDK 让我们可以定义⾃⼰的⽣产者和消费者实现消息通讯⽽⽆视底层通讯协议。

## 消息队列的种类

#### 目前消息队列的中间件选型很多种：

+ rabbitMQ：内部的可玩性（功能性）是非常强
+ rocketMQ：阿里。性能是与kafka相比肩，除此之外还封装了更多功能
+ kafka：最快MQ
+ zeroMQ

#### 这些消息队列中间件有什么区别？

broker：这个流派通常有⼀台服务器作为 Broker，所有的消息都通过它中转。⽣产者把消息发送给它就结束⾃⼰的任务了，Broker 则把消息主动推送给消费者（或者消费者主动轮询）

##### 有broker

+ 重topic：整个broker依据topic来进行消息中转。在重topic的消息队列里必然需要topic的存在。kafka，RocketMQ
+ 轻topic：RabbitMQ。topic可有可无，只是一种中转模式

##### 无broker

在生产者和消费者之间没有使用broker，例如：zeroMQ，直接使用socket进行通信